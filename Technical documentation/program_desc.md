# Описание программы

## Взаимодействие с элементной базой (интерфейс)

Программа взаимодействует со следующими аппаратными компонентами:

- **Датчик расстояния VL53L0X**: Общается через интерфейс I2C (I2C2) для измерений расстояния. Датчик настроен с адресом 0x52. Выводы GPIO используются для управления выводом XSHUT для включения/выключения датчика.

- **GPIO**: Используется для управления выводом XSHUT датчика VL53L0X (TOF_XSHUT_GPIO_Port, TOF_XSHUT_Pin). Вывод устанавливается низким уровнем для выключения датчика и высоким для включения.

- **UART**: Используется для передачи данных измерений и сообщений о состоянии (USART3). Сообщения включают сырое расстояние, отфильтрованное расстояние и время выполнения.

- **TIM**: Периферийный таймер (TIM1) инициализируется, но не активно используется в основном цикле для тайминга; HAL_GetTick() используется для измерения времени выполнения.

- **I2C**: I2C2 используется для связи с датчиком VL53L0X, обрабатывая операции чтения/записи для конфигурации датчика и извлечения данных.

## Входные/выходные параметры

### Входы
- Сырые измерения расстояния от датчика VL53L0X (в миллиметрах), полученные через операции измерения I2C.

### Выходы
- Отфильтрованные и 16 битные значения расстояния (медиана из 10 измерений), передаваемые через UART.
- Сообщения UART, содержащие сырое расстояние, отфильтрованное расстояние и время выполнения в миллисекундах.
- Сообщения о состоянии, указывающие на успешные измерения или ошибки (например, недопустимый статус диапазона).

## Алгоритм обработки информации

1. **Инициализация**:
   - Инициализировать системные периферийные устройства: GPIO, I2C2, TIM1, USART3.
   - Настроить датчик VL53L0X: Ожидать загрузки, инициализация данных, статическая инициализация, калибровка ссылки (VHV и SPAD), установить в режим одиночного измерения.

2. **Основной цикл**:
   - Выполнить одиночное измерение расстояния с использованием VL53L0X_PerformSingleRangingMeasurement.
   - Проверить статус диапазона; если допустимый (RangeStatus == 0), сохранить сырое расстояние в массиве буфера.
   - Передать сырое расстояние через UART.
   - После сбора 10 измерений применить медианный фильтр (сортировать массив и выбрать медианное значение).
   - Передать отфильтрованное расстояние через UART.
   - Измерить и передать время выполнения с использованием HAL_GetTick().
   - Увеличить счетчики и сбросить по мере необходимости (например, после 1000 измерений сбросить до 8).

3. **Обработка ошибок**:
   - Если статус диапазона недопустимый, передать расстояние по умолчанию (2000 мм) для сырого и отфильтрованного значений.

4. **Фильтрация**:
   - Медианный фильтр реализован с пузырьковой сортировкой на буфере из 10 элементов для уменьшения шума в измерениях расстояния.
